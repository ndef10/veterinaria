<style>#cabecera { width: 100%;}</style>
<div class="py-4">
  <h1>Autorizaci√≥n especialistas</h1>
  <hr class="w-100"/>

  <table class="table table-dark w-80 m-auto">
    <thead>
      <tr>
        <th scope="col">#</th>        
        <th scope="col">Nombre</th>
        <th scope="col">Cedula de identidad</th>                      
        <th scope="col">Estado</th>

      </tr>
    </thead>

    <tbody>

      {{#each especialistas}}
      <tr>
        <td>{{@index}}</td>        
        <td>{{this.nombre_especialista}}</td>
        <td>{{this.cedula_de_identidad}}</td>
        
        
      </tr>
      {{/each}}<td><input type="checkbox" {{#if this.estado}} checked {{/if}} onclick="autorizar({{this.cedula_de_identidad}}, this)"></td>

    </tbody>
  </table>
</div>

<script>

  const autorizar = async (cedula_de_identidad, e) => {    
    const estado = e.checked
    console.log(cedula_de_identidad, estado);
    try {
      await axios.put('/autorizacion_especialistas', {
        cedula_de_identidad,
        estado
      })
      alert(estado ? 'Especialista aprobado' : 'Especialista en revision')  
    }
    catch ({ respuesta }) {
      const { data } = respuesta
      const { error } = data
      alert(error)
    }    
  }
  
</script>  